/*!
 * ninjalib.js v0.6.27
 * Thursday, September 18th, 2014, 11:36:52 PM
 */
/*
 * @license
 * Analytics Ninja - GA Tracking Library version
 * This software is made available by LICENSE ONLY.
 * Analytics Ninja LLC
 * http://www.analytics-ninja.com
 *
 * Many aspects of this tracking library come from publicly available scripts, including:
 *
 * whet.extend v0.9.7
 * Standalone port of jQuery.extend that actually works on node.js
 * https://github.com/Meettya/whet.extend
 * Copyright 2012, Dmitrii Karpich
 * Released under the MIT License
 *
 *
 * Special thanks to:
 * @author Eduardo Cereto <eduardocereto@gmail.com>
 * GAS - Google Analytics on Steroids
 *
 * Form Tracking Plugin
 * Vimeo Video Tracking Plugin
 * YouTube Video Tracking Plugin
 *
 * Copyright 2011, Cardinal Path and Direct Performance
 * Licensed under the GPLv3 license.
 *
 *
 * DownloadTracker based on code from Blast Advanced Media.
 * http://www.blastam.com/blog/index.php/2011/04/how-to-track-downloads-in-google-analytics/
 *
 * 
 * ScrollTracker by Justin Cutroni, see http://cutroni.com/blog/2012/02/21/advanced-content-tracking-with-google-analytics-part-1/  
 * Included Version by Eivind Savio, see http://www.savio.no/blogg/a/114/tracking-content-scrollers-scanners-og-readers-in-google-analytics
 *
 *
 * Rank tracker from AJ Kohn
 * http://www.blindfiveyearold.com/new-ways-to-track-keyword-rank
 */
!function(window,undefined){function AN_Module(a){function b(a){("undefined"==typeof a||a)&&(d=extend({},d,a),d.active&&d.run())}var c={active:!0,run:function(){}},d=extend({},c,a);if(!d.name)throw"Module has no name defined!";var e=d.name;return{init:b,name:e,config:d}}function AN_Engine(a){var b={name:"",init:function(){},run:function(){}},c=extend({},b,a);return c.init(),c}var extend=function(){var a,b,c,d,e,f,g,h,i=[].slice;return a=function(){var a,d,e,g,h,j,k,l,m;for(e=arguments[0],j=arguments[1],a=arguments.length>=3?i.call(arguments,2):[],c(e,"Boolean")||(a.unshift(j),m=[e||{},!1],j=m[0],e=m[1]),f(j)&&(j={}),k=0,l=a.length;l>k;k++)if(h=a[k],null!==h)for(g in h)h.hasOwnProperty(g)&&(d=h[g],null!==d&&j[g]!==d&&(j[g]=b(e,d,j[g])));return j},c=function(a,b){return"[object "+b+"]"===Object.prototype.toString.call(a)},d=function(a,b){return Object.prototype.hasOwnProperty.call(a,b)},g=function(a,b){return b===typeof a},e=function(a){var b;return a?a.nodeType||a.setInterval||!c(a,"Object")?!1:!a.constructor||d(a,"constructor")||d(a.constructor.prototype,"isPrototypeOf")?void 0===b||d(a,b):!1:!1},f=function(a){return!(g(a,"object")||g(a,"function"))},h=function(a,b){return c(a,"Array")?c(b,"Array")?b:[]:e(b)?b:{}},b=function(b,d,f){var g;return b&&(c(d,"Array")||e(d))?(g=h(d,f),a(b,g,d)):d},a.apply(this,arguments)},_addEventListener=function(a,b,c,d){var e=function(b){return b&&b.target||(b=window.event,b.target=b.srcElement),c.call(a,b)};return a.addEventListener?(a.addEventListener(b,e,!!d),!0):a.attachEvent?a.attachEvent("on"+b,e):(b="on"+b,"function"==typeof a[b]&&(e=function(a,b){return function(){a.apply(this,arguments),b.apply(this,arguments)}}(a[b],e)),a[b]=e,!0)},_DOMReady=function(a){function b(){b.done||(b.done=!0,a.apply(c,arguments))}var c=this;return/^(interactive|complete)/.test(document.readyState)?b():(_addEventListener(document,"DOMContentLoaded",b,!1),void _addEventListener(window,"load",b,!1))},debug=function(){function a(a){c=a}function b(a,b){if((b||c)&&"undefined"!=typeof console&&"undefined"!=typeof console.log){var d;d="object"==typeof a?a.join(" | "):a,console.log(d)}}var c=!1;return{setLevel:a,log:b}}();"object"!=typeof JSON&&(JSON={}),function(){function f(a){return 10>a?"0"+a:a}function quote(a){return escapable.lastIndex=0,escapable.test(a)?'"'+a.replace(escapable,function(a){var b=meta[a];return"string"==typeof b?b:"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+a+'"'}function str(a,b){var c,d,e,f,g,h=gap,i=b[a];switch(i&&"object"==typeof i&&"function"==typeof i.toJSON&&(i=i.toJSON(a)),"function"==typeof rep&&(i=rep.call(b,a,i)),typeof i){case"string":return quote(i);case"number":return isFinite(i)?String(i):"null";case"boolean":case"null":return String(i);case"object":if(!i)return"null";if(gap+=indent,g=[],"[object Array]"===Object.prototype.toString.apply(i)){for(f=i.length,c=0;f>c;c+=1)g[c]=str(c,i)||"null";return e=0===g.length?"[]":gap?"[\n"+gap+g.join(",\n"+gap)+"\n"+h+"]":"["+g.join(",")+"]",gap=h,e}if(rep&&"object"==typeof rep)for(f=rep.length,c=0;f>c;c+=1)"string"==typeof rep[c]&&(d=rep[c],e=str(d,i),e&&g.push(quote(d)+(gap?": ":":")+e));else for(d in i)Object.prototype.hasOwnProperty.call(i,d)&&(e=str(d,i),e&&g.push(quote(d)+(gap?": ":":")+e));return e=0===g.length?"{}":gap?"{\n"+gap+g.join(",\n"+gap)+"\n"+h+"}":"{"+g.join(",")+"}",gap=h,e}}"function"!=typeof Date.prototype.toJSON&&(Date.prototype.toJSON=function(){return isFinite(this.valueOf())?this.getUTCFullYear()+"-"+f(this.getUTCMonth()+1)+"-"+f(this.getUTCDate())+"T"+f(this.getUTCHours())+":"+f(this.getUTCMinutes())+":"+f(this.getUTCSeconds())+"Z":null},String.prototype.toJSON=Number.prototype.toJSON=Boolean.prototype.toJSON=function(){return this.valueOf()});var cx=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,escapable=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,gap,indent,meta={"\b":"\\b","	":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},rep;"function"!=typeof JSON.stringify&&(JSON.stringify=function(a,b,c){var d;if(gap="",indent="","number"==typeof c)for(d=0;c>d;d+=1)indent+=" ";else"string"==typeof c&&(indent=c);if(rep=b,b&&"function"!=typeof b&&("object"!=typeof b||"number"!=typeof b.length))throw new Error("JSON.stringify");return str("",{"":a})}),"function"!=typeof JSON.parse&&(JSON.parse=function(text,reviver){function walk(a,b){var c,d,e=a[b];if(e&&"object"==typeof e)for(c in e)Object.prototype.hasOwnProperty.call(e,c)&&(d=walk(e,c),d!==undefined?e[c]=d:delete e[c]);return reviver.call(a,b,e)}var j;if(text=String(text),cx.lastIndex=0,cx.test(text)&&(text=text.replace(cx,function(a){return"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)})),/^[\],:{}\s]*$/.test(text.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,"")))return j=eval("("+text+")"),"function"==typeof reviver?walk({"":j},""):j;throw new SyntaxError("JSON.parse")})}();/*!
 * ninjalib core object
 **/
var $,NINJALIB=function(){function a(a){i=extend({},l,a),debug.setLevel(i.debug);var b="ninjalib@"+i.version+" Init ";i.implementationVersion&&(b+=" implementation@"+i.implementationVersion),debug.log(b,i),$||(typeof jQuery!==undefined?g(jQuery):debug.warn("No jQuery found,necessary for ninjalib"));for(var c=0;c<i.engines.length;c++)this.engine_factory.createEngine(i.engines[c]);k=this.engine_factory.getEngines(),this.modules=this.module_factory.getModules();for(c in this.modules)if(this.modules.hasOwnProperty(c)){var d=this.modules[c];d.init(i[d.name])}f()}function b(){for(var a=0;a<arguments.length;a++){var b=arguments[a];if(b.length){var d=b[b.length-1];if("object"==typeof d&&null!==d&&"undefined"!=typeof d.delayed){c(b);continue}}for(var e=0;e<k.length;e++)k[e].run(b)}}function c(a){delete a[a.length-1].delayed,a[a.length-1].page_value=i.delay.page_value,a[a.length-1].hostname=document.location.hostname;var b=d();b.push(a),e(b)}function d(){var a=document.cookie.match(new RegExp(i.delay.cookie_name+"=(.*?)(; |$)"));return a?JSON.parse(a[1]):[]}function e(a){var b=i.delay.cookie_domain||document.location.hostname;document.cookie=!a||"object"==typeof a&&0===a.length?i.delay.cookie_name+"=; expires=Thu, 01 Jan 1970 00:00:01 GMT;;domain="+b+";":i.delay.cookie_name+"="+JSON.stringify(a)+";domain="+b+";"}function f(){for(var a=d(),c=0;c<a.length;c++){var f=a[c],g=f[f.length-1].page_value,h=f[f.length-1].hostname;b(["_setPageName",g]),h!=document.location.hostname&&b(["_setHostname",h]),b(f),b(["_setPageName",i.delay.page_value]),h!=document.location.hostname&&b(["_setHostname",document.location.hostname])}e(!1)}function g(a){$=a}function h(a){return j[a]}var i,j,k,l={debug:0,version:"0.6.27",engines:[],delay:{cookie_name:"__umtn",cookie_domain:!1,page_value:document.location.pathname+document.location.search}};return{init:a,hit:b,setJquery:g,getModule:h}},_ninja;window._ninja=_ninja=new NINJALIB,_ninja.module_factory=function(){var a={};return{createModule:function(b){var c=new AN_Module(b);a[b.name]=c},getModules:function(){return a}}}(),_ninja.module_factory.createModule({name:"forms",category:"Form Tracking",change_tags:["input","select","textarea","hidden"],submit_tags:["form"],run:function(){var a=this,b=_ninja,c=function(a){for(;a&&"HTML"!==a.nodeName&&"FORM"!==a.nodeName;)a=a.parentNode;return"FORM"===a.nodeName?a.getAttribute("name")||a.getAttribute("id")||"none":"none"},d=function(){if(!this._formTracked){this._formTracked=!0;var d,e,f=[],g=function(d){var e=d.target,f=e.name||e.id||e.type||e.nodeName,g=c(e),h="form ("+g+")",i=f+" ("+d.type+")";b.hit(["_trackEvent",a.category,h,i])};for(d=0;d<a.change_tags.length;d++)for(f=document.getElementsByTagName(a.change_tags[d]),e=0;e<f.length;e++)_addEventListener(f[e],"change",g);for(d=0;d<a.submit_tags.length;d++)for(f=document.getElementsByTagName(a.submit_tags[d]),e=0;e<f.length;e++)_addEventListener(f[e],"submit",g)}};_DOMReady(d)}}),_ninja.module_factory.createModule({name:"links",local_domains:[],track_event:"mousedown",filetypes:["zip","exe","pdf","doc*","xls*","ppt*","mp3","rtf","xml","txt","dot","rss","jpe?g","png","gif","csv","vcf"],filetypes_exclude:[],filetypes_include:[],external_link_event:!0,external_link_callback:function(){},download_link_event:!0,download_link_callback:function(){},mailto_link_event:!0,mailto_link_callback:function(){},run:function(){var a=this,b=_ninja;a.filetypes=a.filetypes.concat(a.filetypes_include);var c=function(){var c=new RegExp("\\.("+a.filetypes.join("|")+")$","i"),d=new RegExp("\\.("+a.filetypes_exclude.join("|")+")$","i"),e=/^itpc\:/i;_addEventListener(document,a.track_event,function(f){for(var g=f.target;"A"!=g.nodeName;){if(!g.parentNode)return;g=g.parentNode}var h=g.href;if(h&&h.match(/^https?\:/i)&&!h.match(document.domain)){var i,j=h.match(/^https?\:\/\/([^\/?#]+)(?:[\/?#]|$)/i);if(j&&(i=j[1]),i&&$.inArray(i,a.local_domains)>-1)g.local=!0;else{var k=h.match(/^https?\:\/\/([^\/?#]+)(?:[\/?#]|$)/i),l=k&&k[1];a.external_link_event&&b.hit(["_trackEvent","External Link",l,h,null,!0]),a.external_link_callback(g)}}else if(h&&h.match(/^mailto\:/i)){var m=h.replace(/^mailto\:/i,"");a.mailto_link_event&&m.match(/^([a-zA-Z0-9_\.\-])+\@(([a-zA-Z0-9\-])+\.)+([a-zA-Z0-9]{2,4})+(\?.*)?$/)&&b.hit(["_trackEvent","Email","Click",m]),a.mailto_link_callback(g)}if(h&&(h.match(c)&&!h.match(d)||h.match(e))){var n=/[.]/.exec(h)?/[^.]+$/.exec(h)[0]:undefined,o=h.replace(/^.*:\/\/[^\/]*/,"");h.match(e)&&(n="itunes"),a.download_link_event&&b.hit(["_trackEvent","Download",n,o]),a.download_link_callback(g)}})};_DOMReady(c)}}),_ninja.module_factory.createModule({name:"pageview",active:!1,run:function(){var a=_ninja;a.hit(["_trackPageview"])}}),_ninja.module_factory.createModule({name:"scroll",target:"#content",allowed:!0,allowed_callback:function(){},started:!0,started_callback:function(){},bottom:!0,bottom_callback:function(){},reader_type:!0,reader_type_callback:function(){},content_bottom:!1,content_bottom_callback:function(){},run:function(){var a=this,b=_ninja,c=30,d=150,e=100,f=0,g=!1,h=!1,i=!1,j=0,k=0,l=0,m=0,n=0,o=null,p=null,q=0,r=function(a){var b;if("function"==typeof a)b=r(a());else if($.isArray(a)&&2==a.length)b=a;else if(a.jquery)b=[a.offset().top,a.offset().top+a.innerHeight()];else if("string"==typeof a&&$(a).length){var c=$(a).eq(0);b=[c.offset().top,c.offset().top+c.innerHeight()]}else b=!1;return b},s=function(){j=(new Date).getTime();var c=r(a.target);c&&(o=c[0],p=c[1],q=p-o,$(window).height()<p&&a.allowed&&(b.hit(["_trackEvent","Page Scroll","Page Scroll: Allowed",window.location.pathname,q,!0]),"function"==typeof a.allowed_callback&&a.allowed_callback(q)),$(window).scroll(function(){f&&clearTimeout(f),f=setTimeout(t,e)}))},t=function(){var e=$(window).height()+$(window).scrollTop(),f=$(document).height();if(e>d&&!g&&(g=!0,k=(new Date).getTime(),l=j>0?Math.round((k-j)/1e3):"",a.started&&b.hit(["_trackEvent","Page Scroll","Page Scroll: Started",window.location.pathname,l,!0]),"function"==typeof a.started_callback&&a.started_callback(l)),e>=p&&!h){l=(new Date).getTime(),m=Math.round((l-k)/1e3);var o,q;a.reader_type&&(c>m?(o="Content Scanner",q=!0):(o="Content Reader",q=!1),b.hit(["_trackEvent","Page Scroll","Page Scroll: "+o,window.location.pathname,m,q]),"function"==typeof a.reader_type_callback&&a.reader_type_callback(o,m)),a.content_bottom&&b.hit(["_trackEvent","Page Scroll","Page Scroll: Content Bottom",window.location.pathname,null,!0]),"function"==typeof a.content_bottom_callback&&a.content_bottom_callback(),h=!0}if(e==f&&!i){n=(new Date).getTime();var r=Math.round((n-k)/1e3);a.bottom&&b.hit(["_trackEvent","Page Scroll","Page Scroll: Page Bottom",window.location.pathname,r,!0]),"function"==typeof a.bottom_callback&&a.bottom_callback(r),i=!0}};_DOMReady(s)}}),_ninja.module_factory.createModule({name:"searchrank",run:function(){if(document.referrer.match(/google\.([a-zA-Z]{2,5})/gi)&&document.referrer.match(/cd/gi)){var a,b=document.referrer,c=b.match(/cd=(.*?)&/),d=parseInt(c[1],10),e=b.match(/q=(.*?)&/);a=e[1].length>0?decodeURI(e[1]):"(not provided)";var f=document.location.pathname;_ninja.hit(["_trackEvent","RankTracker",a,f,d,!0])}}}),_ninja.module_factory.createModule({name:"social",facebook:!0,twitter:!0,linkedin:!0,linkedin_callback_name:"linkedin_share",run:function(){var a=this,b=_ninja,c=function(){var a=window.fbAsyncInit;window.fbAsyncInit=function(){"function"==typeof a&&a(),FB.init({xfbml:!0}),FB.Event.subscribe("edge.create",function(a){b.hit(["_trackSocial","facebook","like",a])}),FB.Event.subscribe("edge.remove",function(a){b.hit(["_trackSocial","facebook","unlike",a])}),FB.Event.subscribe("message.send",function(a){b.hit(["_trackSocial","facebook","send",a])})},function(a){var b,c="facebook-jssdk",d=a.getElementsByTagName("script")[0];a.getElementById(c)||(b=a.createElement("script"),b.id=c,b.async=!0,b.src="//connect.facebook.net/en_US/all.js?a=b",d.parentNode.insertBefore(b,d))}(document)},d=function(){function a(a){if(a){var d;a.target&&"IFRAME"==a.target.nodeName&&(d=c(a.target.src,"url")),b.hit(["_trackSocial","twitter","tweet",d])}}function c(a,b){if(a){var c=new RegExp("[\\?&#]"+b+"=([^&#]*)"),d=c.exec(a);return null!==d?decodeURIComponent(d[1]):void 0}}window.twttr=function(a,b,c){var d,e,f=a.getElementsByTagName(b)[0];return a.getElementById(c)||(e=a.createElement(b),e.id=c,e.src="//platform.twitter.com/widgets.js",f.parentNode.insertBefore(e,f)),window.twttr||(d={_e:[],ready:function(a){d._e.push(a)}})}(document,"script","twitter-wjs"),window.twttr.ready(function(){window.twttr.events.bind("tweet",a)})},e=function(){window[a.linkedin_callback_name]=function(a){b.hit(["_trackSocial","linkedin","share",a])}};_DOMReady(function(){a.facebook&&c(),a.twitter&&d(),a.linkedin&&e()})}}),_ninja.module_factory.createModule({name:"video-html5",category:"video",action_play:"play",action_pause:"pause",action_progress:"progress %{{pct}}",action_finish:"finish",progress_markers:[25,50,75,90],run:function(){function a(a){switch(h=a.target,a.type){case"timeupdate":for(var b=Math.round(100*a.target.currentTime/a.target.duration),c=g[a.target.id].progress_markers,e=0;e<c.length;e++)!c[e].fired&&b>c[e].value&&(c[e].fired=!0,d(f.action_progress.replace("{{pct}}",c[e].value)));break;case"play":d(f.action_play);break;case"pause":d(f.action_pause);break;case"ended":d(f.action_finish)}}function b(){e(document.getElementsByTagName("video")),e(document.getElementsByTagName("audio"))}function c(){var a=h.currentSrc.split("/");return decodeURIComponent(a[a.length-1])}function d(a){var b=f.category,d=a,e=c();if("function"==typeof f.event_callback){var g=f.event_callback(f.category,a,c());if(!g)return;"object"==typeof g&&(b=g[0],d=g[1],e=g[2])}_ninja.hit(["_trackEvent",b,d,e])}function e(b){for(var c=0;c<b.length;c++){var d;b[c].getAttribute("id")?d=b[c].getAttribute("id"):(d="html5_video_"+Math.random().toString(36).slice(2),b[c].setAttribute("id",d)),g[d]={progress_markers:[]};for(var e=0;e<f.progress_markers.length;e++)g[d].progress_markers.push({fired:!1,value:f.progress_markers[e]});b[c].addEventListener("play",a,!1),b[c].addEventListener("pause",a,!1),b[c].addEventListener("ended",a,!1),b[c].addEventListener("timeupdate",a,!1),b[c].addEventListener("ended",a,!1)}}var f=this,g={},h=null;_DOMReady(b),_ninja.html5video={trackHtml5Players:b}}}),_ninja.module_factory.createModule({name:"video-jwplayer",category:"video",action_play:"play",action_pause:"pause",action_progress:"progress %{{pct}}",action_finish:"finish",auto:!0,player_ids:[],progress_markers:[25,50,75,90],progress_divisions:5,event_callback:!1,run:function(){var a,b=this,c=[],d=function(){if(b.auto){var c=document.getElementsByTagName("object");for(a=0;a<c.length;a++)c[a].id&&"undefined"!=typeof jwplayer&&"undefined"!==jwplayer(c[a].id).getState()&&e(c[a].id)}for(a=0;a<b.player_ids.length;a++)e(b.player_ids[a])},e=function(a){c[a]||(c[a]=new f(a))},f=function(c){var d=jwplayer(c),e=null,f=null,g=function(){var a=i();return a?a.file||a.sources[a.index].file:null},h=function(a){e=a},i=function(){return e},j=function(){if(b.progress_markers)for(f={},a=0;a<b.progress_markers.length;a++)f[b.progress_markers[a]]=!1;else{f={};var c=100/b.progress_divisions;for(a=0;100>a;a++){var d=c*Math.floor(a/c);f[d]=!1}}},k=function(a){var b=0;for(var c in f)a>=c&&c>b&&(b=c);b&&!f[b]&&(f[b]=!0,l(b))},l=function(a){m(b.action_progress.replace("{{pct}}",a))},m=function(a){var c=b.category,e=a,f=g();if("function"==typeof b.event_callback){var h=b.event_callback(b.category,a,g(),d.getPlaylistItem());if(!h)return;"object"==typeof h&&(c=h[0],e=h[1],f=h[2])}_ninja.hit(["_trackEvent",c,e,f])};d&&(j(),d.onPlay(function(){h(d.getPlaylistItem()),m(b.action_play)}),d.onPause(function(){m(b.action_pause)}),d.onComplete(function(){m(b.action_finish)}),d.onTime(function(a){var b=Math.floor(100*a.position/a.duration);k(b)}))};_ninja.jwplayer={trackJWPlayers:d,trackJWPlayer:e},_DOMReady(d)}}),_ninja.module_factory.createModule({name:"video-vimeo",category:"video",action_play:"play",action_pause:"pause",action_progress:"progress %{{pct}}",action_finish:"finish",action_seek:"seek",percentages:[25,50,75,90],force:!0,event_callback:!1,run:function(){function a(a){if(h[a.player_id]||(h[a.player_id]={},h[a.player_id].timeTriggers=Array.prototype.slice.call(g)),h[a.player_id].timeTriggers.length>0&&100*a.data.percent>=h[a.player_id].timeTriggers[0]){var b=h[a.player_id].timeTriggers.shift();d(f.action_progress.replace("{{pct}}",b),i[a.player_id])}}function b(a,b,c){if(!c.contentWindow||!c.contentWindow.postMessage||!JSON)return!1;var d=c.getAttribute("src").split("?")[0],e=JSON.stringify({method:a,value:b});return c.contentWindow.postMessage(e,d),!0}function c(b){if(String.prototype.indexOf.call(b.origin,"//player.vimeo.com")>-1){var c=JSON.parse(b.data);if("ready"===c.event)e.call();else if(c.method)"getVideoUrl"===c.method&&(i[c.player_id]=c.value);else if("playProgress"===c.event)a(c);else{var g;g="play"==c.event?f.action_play:"pause"==c.event?f.action_pause:"finish"==c.event?f.action_finish:"seek"==c.event?f.action_seek:c.event,d(g,i[c.player_id])}}}function d(a,b){var c=f.category,d=a,e=b;if("function"==typeof f.event_callback){var g=f.event_callback(c,d,e);if(!g)return;"object"==typeof g&&(c=g[0],d=g[1],e=g[2])}_ninja.hit(["_trackEvent",c,d,e])}function e(){for(var a,d,e,h=document.getElementsByTagName("iframe"),i=0,k=f.force,l=f.percentages,m=0;m<h.length;m++)if(String.prototype.indexOf.call(h[m].src,"//player.vimeo.com")>-1){if(a="gas_vimeo_"+m,d=h[m].src,e="?",String.prototype.indexOf.call(d,"?")>-1&&(e="&"),String.prototype.indexOf.call(d,"api=1")<0){if(!k)continue;d+=e+"api=1&player_id="+a}else String.prototype.indexOf.call(d,"player_id=")<-1&&(d+=e+"player_id="+a);if(i++,h[m].id=a,h[m].src!==d){h[m].src=d;break}b("getVideoUrl","",h[m]),b("addEventListener","play",h[m]),b("addEventListener","pause",h[m]),b("addEventListener","finish",h[m]),b("addEventListener","seek",h[m]),l&&(g=l,b("addEventListener","playProgress",h[m]))}i>0&&j===!1&&(_addEventListener(window,"message",c,!1),j=!0)}var f=this,g=[],h={},i={},j=!1;_DOMReady(e),window._ninja.retrackVimeo=function(){e()}}}),_ninja.module_factory.createModule({name:"video-youtube",category:"video",action_play:"play",action_pause:"pause",action_progress:"progress %{{pct}}",action_finish:"finish",label_callback:null,percentages:[25,50,75,90],force:!0,run:function(){function a(b,c){if(l[c]===undefined||l[c].timeTriggers.length<=0)return!1;var d=b.getCurrentTime()/b.getDuration()*100;if(d>=l[c].timeTriggers[0]){var e=l[c].timeTriggers.shift();j.hit(["_trackEvent",i.category,i.action_progress.replace("{{pct}}",e),h(b.getVideoUrl())])}l[c].timer=setTimeout(a,1e3,b,c)}function b(b){var c=b.getVideoUrl();l[c]&&l[c].timer&&(a(b,c),clearTimeout(l[c].timer))}function c(c){if(k&&k.length){var d=c.getVideoUrl();l[d]?b(c):(l[d]={},l[d].timeTriggers=Array.prototype.slice.call(k)),l[d].timer=setTimeout(a,1e3,c,d)}}function d(a){var d="";switch(a.data){case 0:d=i.action_finish,b(a.target);break;case 1:d=i.action_play,c(a.target);break;case 2:d=i.action_pause,b(a.target)}d&&j.hit(["_trackEvent",i.category,d,h(a.target.getVideoUrl())])}function e(a){j.hit(["_trackEvent",i.category,"error ("+a.data+")",h(a.target.getVideoUrl())])}function f(){for(var a,b,c,d=document.getElementsByTagName("object"),e=/(https?:\/\/www\.youtube(-nocookie)?\.com[^\/]*).*\/v\/([^&?]+)/,f=0;f<d.length;f++){a=d[f].getElementsByTagName("param");for(var g=0;g<a.length;g++)if("movie"===a[g].name&&a[g].value){c=a[g].value.match(e),c&&c[1]&&c[3]&&(b=document.createElement("iframe"),b.src=c[1]+"/embed/"+c[3]+"?enablejsapi=1",b.width=d[f].width,b.height=d[f].height,b.setAttribute("frameBorder","0"),b.setAttribute("allowfullscreen",""),d[f].parentNode.insertBefore(b,d[f]),d[f].parentNode.removeChild(d[f]),f--);break}}}function g(){var a=i.force,b=i.percentages;if(a)try{f()}catch(c){j.hit(["_trackException",c,"GAS Error on youtube.js:_ytMigrateObjectEmbed"])}for(var g=document.getElementsByTagName("iframe"),h=!1,l=0;l<g.length;l++)if(String.prototype.indexOf.call(g[l].src,"//www.youtube.com/embed")>-1){if(g[l].className.match(/tracked/))continue;if(String.prototype.indexOf.call(g[l].src,"enablejsapi=1")<0){if(!a)continue;g[l].src+=String.prototype.indexOf.call(g[l].src,"?")<0?"?enablejsapi=1&origin="+encodeURIComponent(location.protocol+"//"+location.hostname):"&enablejsapi=1&origin="+encodeURIComponent(location.protocol+"//"+location.hostname)}g[l].className+=" tracked",m[g[l].src]=g[l],h=!0}if(h){b&&b.length&&(k=b),window.onYouTubePlayerAPIReady=function(){var a;n=!0;for(var b in m)m.hasOwnProperty(b)&&(a=new window.YT.Player(m[b]),a.addEventListener("onStateChange",d),a.addEventListener("onError",e))};var o=document.createElement("script"),p="http:";"https:"===document.location.protocol&&(p="https:"),o.src=p+"//www.youtube.com/player_api",o.type="text/javascript",o.async=!0;var q=document.getElementsByTagName("script")[0];q.parentNode.insertBefore(o,q)}}function h(a){return"function"==typeof i.label_callback?i.label_callback(a):a}var i=this,j=_ninja,k=[],l={},m={},n=!1;_DOMReady(g),window._ninja.retrackYT=function(){g(),n&&window.onYouTubePlayerAPIReady()}}}),_ninja.engine_factory=function(){var a={},b=[];return{registerEngineClass:function(b){if(!b.type)throw"Engine registered with no defined type name";a[b.type]=b},createEngine:function(c){if("object"==typeof c){if(!c.type)throw"Engine type not defined in passed options. 'type' attribute must be present in configuration object.";if(!a[c.type])throw"Requested engine type ["+c.type+"] does not exist in registry";var d=new AN_Engine(extend(!0,{},a[c.type],c));b.push(d)}},getEngines:function(){return b}}}(),_ninja.engine_factory.registerEngineClass({type:"echo",init:function(){debug.log("echo engine started")},run:function(){if(window.console&&window.console.log){var a=Array.prototype.slice.call(arguments);a.unshift("<ninjalib hit>");var b=a.join(",");if(window.chrome){var c="background: #222; color: #bada55";window.console.log("%c "+b,c)}else window.console.log(b)}}}),_ninja.engine_factory.registerEngineClass({type:"ga",init:function(){window._gaq=window._gaq||[],function(){var a=document.createElement("script");a.type="text/javascript",a.async=!0,a.src=("https:"==document.location.protocol?"https://ssl":"http://www")+".google-analytics.com/ga.js";var b=document.getElementsByTagName("script")[0];b.parentNode.insertBefore(a,b)}(),this.name_prefix=this.name?this.name+".":"";var a=this.name?"Named Tracker "+this.name:"Unnamed Tracker";this.tracker_id?(debug.log("Initializing GA engine for "+a),window._gaq.push([this.name_prefix+"_setAccount",this.tracker_id])):debug.log("Registering GA engine for already initialized "+a)},run:function(a){var b=a.slice();b[0]=this.name_prefix+b[0],window._gaq.push(b)},constructPush:function(a){return"_trackEvent"==a[0]?this.constructEvent(a):!1},constructEvent:function(a){if(!a[1])return!1;var b={category:a[1]};return a[2]&&(b.action=a[2]),a[3]&&(b.label=a[3]),a[4]&&(b.value=a[4]),a[5]&&(b.non_interaction=a[5]),b}}),_ninja.engine_factory.registerEngineClass({type:"gtm",init:function(){window.dataLayer=window.dataLayer||[]},run:function(a){var b=this.constructPush(a);b.eventSource="ninja",window.dataLayer.push(b)},constructPush:function(a){var b,c;return"object"==typeof a[a.length-1]&&(c=a.pop()),b=a[0]&&a[0].indexOf("_trackEvent")>-1?this.constructGAEvent(a):a[0]&&a[0].indexOf("_trackPageview")>-1?this.constructGAPageview(a):a[0]&&a[0].indexOf("_trackSocial")>-1?this.constructGASocial(a):a[0]&&a[0].indexOf("_trackTiming")>-1?this.constructGATiming(a):a[0]&&a[0].indexOf("_setPageName")>-1?this.constructSetPageName(a):a[0]&&a[0].indexOf("_setHostname")>-1?this.constructSetHostname(a):{event:"ninja",params:a},c&&(b=extend({},b,c)),b},constructSetPageName:function(a){return{gaPagePath:a[1]}},constructSetHostname:function(a){return{gaHostname:a[1]}},constructGAPageview:function(a){var b={event:"gaPageview"};return b.gaPagePath=a[1]?a[1]:document.location.pathname,b},constructGAEvent:function(a){if(!a[1])return!1;var b={event:"gaEvent",gaEventCategory:a[1],gaEventAction:a[2],gaEventLabel:a[3]||"",gaEventValue:a[4]||0,gaEventNonInteraction:a[5]||!1};return b},constructGASocial:function(a){var b={event:"gaSocial",gaSocialActivityNetwork:a[1],gaSocialActivityAction:a[2]};return b.gaSocialActivityTarget=a[3]?a[3]:null,b.gaSocialActivityPagePath=a[4]?a[4]:null,b},constructGATiming:function(a){var b={event:"gaUserTiming",gaUserTimingCategory:a[1],gaUserTimingVariable:a[2],gaUserTimingValue:a[3]};return b.gaUserTimingLabel=a[4]?a[4]:null,b.gaUserTimingSample=a[5]?a[5]:null,b},constructGAException:function(a){return a}}),window._ninja=_ninja}(window);